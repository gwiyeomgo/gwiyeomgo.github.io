"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[940],{5847:function(e,n,t){t.r(n),t.d(n,{Head:function(){return a.p},default:function(){return o}});var l=t(6540),r=t(8453);function c(e){const n=Object.assign({h3:"h3",p:"p",code:"code",pre:"pre",blockquote:"blockquote",a:"a",ol:"ol",li:"li",h2:"h2",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",strong:"strong"},(0,r.RP)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.h3,null,"배경"),"\n",l.createElement(n.p,null,"코드를 main에 잘 머지시키고 젠킨스에서 배포버튼을 클릭했다.\n그런데...\n배포 실패했다.\n그래서 consle 에 메세지를 확인했다.\n에러는 2개이다.\n",l.createElement(n.code,null,"에러1 =>해결방법 찾아보니  https://satisfactoryplace.tistory.com/251")),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-11:21:58",ERROR:!0,Couldn:!0,t:!0,find:!0,any:!0,revision:!0,to:!0,build:!0,Verify:!0,the:!0,repository:!0,and:!0,branch:!0,configuration:!0,htmlFor:!0,this:!0,job:!0},"11:21:58 Publish artifacts to S3 Bucket Build is still running\n11:21:58 Publish artifacts to S3 Bucket Using S3 profile: S3 Deploy\n11:21:58 Publish artifacts to S3 Bucket Skipping publishing on S3 because build failed\n")),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"에러2 => 해결방법 찾아보니 https://huskdoll.tistory.com/484")),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-11:21:58",ERROR:!0,Couldn:!0,t:!0,find:!0,any:!0,revision:!0,to:!0,build:!0,Verify:!0,the:!0,repository:!0,and:!0,branch:!0,configuration:!0,htmlFor:!0,this:!0,job:!0},"11:21:58 Publish artifacts to S3 Bucket Build is still running\n11:21:58 Publish artifacts to S3 Bucket Using S3 profile: S3 Deploy\n11:21:58 Publish artifacts to S3 Bucket Skipping publishing on S3 because build failed\n")),"\n",l.createElement(n.p,null,"둘다 devops 를 담당하는 동료분께 요청드렸고\n젠킨스 설정을 변경하셨다고 한다."),"\n",l.createElement(n.p,null,"개발은 끝냈는데 배포 못하니까 답답하더라..\n이참에 젠킨스에 관해서 공부하고 기록하려고 한다."),"\n",l.createElement(n.h3,null,"젠킨스"),"\n",l.createElement(n.blockquote,null,"\n",l.createElement(n.p,null,"Software distribution is the process of delivering software to the end user."),"\n"),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"빌드(Build), 테스트, 그리고 배포(deployment) 도구 등 체인 전체를 통합할 수 있는 방법을 제공")),"\n",l.createElement(n.p,null,"cl?CI 지속적인 통합(Continuous Integration) 서버"),"\n",l.createElement(n.p,null,l.createElement(n.a,{href:"https://jw910911.tistory.com/81"},"https://jw910911.tistory.com/81")),"\n",l.createElement(n.h3,null,"20220411"),"\n",l.createElement(n.h3,null,"배경"),"\n",l.createElement(n.p,null,"개발자가 사용할 dev 서버에 배포한다."),"\n",l.createElement(n.p,null,"사용자 페이지\n어드민 페이지"),"\n",l.createElement(n.h3,null,"작업 목표"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"사용자 페이지\n(프론트_프로젝트) 레포지토리에 dev 브랜치 따기\njenkins와 dev 브랜치 연결\njenkins에서 새로운 job 생성하기\njob 이름 - (프론트_프로젝트)-dev\njenkins 셋팅하기\n(프론트_프로젝트)-test job 설정 참고\ns3 버킷 만들기\ncloudFront과 s3 버킷 연결하기\nRoute53과 cloudFront 연결하기\njenkins 빌드 후 조치 설정\ncloudFront ID 연결하기\n배포될 코드 설정 수정하기\nfront 배포- (프론트_프로젝트) 코드 수정하기\n젠킨스 빌드 버튼 누르기\nsuccess가 뜨는지 확인\ndev url로 들어가서 제대로 페이지가 나오는지 확인\n확인 필요\n이미 s3에 사용하려 했던 이름의 버킷이 존재한다.\n-> 비어 있으므로 그대로 사용해도 되는지 확인해볼 것"),"\n"),"\n",l.createElement(n.p,null,"위에 s3 버킷은 cloudFront 설정도 적용이 되어 있다."),"\n",l.createElement(n.p,null,"Route53에 이미 사용하려 했던 레코드(url)이 존재한다."),"\n",l.createElement(n.p,null,"=> S3는 객체가 비어 있으므로 그대로 사용하는 것으로 결정됨, CloudFront와 Route53은 기존 것을 지우고 새로 만들어서 연결함"),"\n",l.createElement(n.ol,{start:"2"},"\n",l.createElement(n.li,null,"어드민 페이지\n(어드민_프로젝트) 레포지토리에 dev 브랜치 따기\njenkins와 dev 브랜치 연결\njenkins에서 새로운 job 생성하기\njob 이름 - (어드민_프로젝트)-dev\njenkins 셋팅하기\n(어드민_프로젝트)-test job 설정 참고\ns3 버킷 만들기\ncloudFront과 s3 버킷 연결하기\nRoute53과 cloudFront 연결하기\n배포될 코드 config, package.json 파일 수정하기\njenkins 빌드 후 조치 설정\ncloudFront ID 연결하기\ns3에 소스 코드 붓기\nurl에 접속해서 확인하기"),"\n"),"\n",l.createElement(n.h2,null,"️ 환경별 구성 정리 (Jenkins 기준)"),"\n",l.createElement(n.table,null,l.createElement(n.thead,null,l.createElement(n.tr,null,l.createElement(n.th,null,"항목"),l.createElement(n.th,null,"dev"),l.createElement(n.th,null,"staging / production"))),l.createElement(n.tbody,null,l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"CI/CD")),l.createElement(n.td,null,"Jenkins → EC2 SSH 접속 + ",l.createElement(n.code,null,"docker-compose")," 배포"),l.createElement(n.td,null,"Jenkins → Docker build & push → ",l.createElement(n.code,null,"kubectl")," 또는 Helm 배포")),l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"환경 설정")),l.createElement(n.td,null,l.createElement(n.code,null,".env.dev")," 파일 사용"),l.createElement(n.td,null,l.createElement(n.code,null,"ConfigMap"),", ",l.createElement(n.code,null,"Secret"),", ",l.createElement(n.code,null,"Helm values.yaml")," 로 환경 설정 분리")),l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"관측")),l.createElement(n.td,null,"EC2 내부 직접 확인 (로그, DB, curl 등)"),l.createElement(n.td,null,"CloudWatch, Prometheus, Grafana 등 외부 모니터링 도구 사용")),l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"인증")),l.createElement(n.td,null,"로컬 테스트용 JWT 등 간단한 인증 로직"),l.createElement(n.td,null,"Cognito 같은 외부 인증 없이 직접 JWT 발급 방식 (침고 Cognito, OAuth2, 인증 프록시 등 실서비스 인증 적용가능)")),l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"DB 구성")),l.createElement(n.td,null,"EC2 내부 Docker MySQL (dev 전용 DB)"),l.createElement(n.td,null,"AWS RDS (staging DB, production DB)")),l.createElement(n.tr,null,l.createElement(n.td,null,l.createElement(n.strong,null,"배포 빈도")),l.createElement(n.td,null,"수시로 자주 배포 가능 (개발자 주도)"),l.createElement(n.td,null,"승인된 변경만 배포 (PR → Merge → Jenkins 승인 배포)")))))}var u=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.RP)(),e.components);return n?l.createElement(n,e,l.createElement(c,e)):c(e)},a=t(7292);function o(e){return l.createElement(a.A,e,l.createElement(u,e))}a.A}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-infra-2021-08-05-infra-jenkins-build-mdx-280ef5791371aa5ec3b6.js.map