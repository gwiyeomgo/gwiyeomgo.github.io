{"version":3,"file":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2025-03-06-mysql-error-lock-table-size-exceeded-mdx-69f431da63b7cc49d2a3.js","mappings":"mNAGA,SAASA,EAAkBC,GACzB,MAAMC,EAAcC,OAAOC,OAAO,CAChCC,IAAK,MACLC,KAAM,OACNC,GAAI,KACJC,EAAG,IACHC,GAAI,KACJC,GAAI,OACHC,EAAAA,EAAAA,MAAsBV,EAAMW,YAC/B,OAAOC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMA,EAAAA,cAAoBX,EAAYG,IAAK,KAAMQ,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,0EAA2E,KAAMO,EAAAA,cAAoBX,EAAYK,GAAI,KAAM,MAAO,KAAMM,EAAAA,cAAoBX,EAAYM,EAAG,KAAM,6NAA8N,KAAMK,EAAAA,cAAoBX,EAAYK,GAAI,KAAM,MAAO,KAAMM,EAAAA,cAAoBX,EAAYO,GAAI,KAAM,KAAMI,EAAAA,cAAoBX,EAAYQ,GAAI,KAAM,sBAAuB,KAAMG,EAAAA,cAAoBX,EAAYQ,GAAI,KAAM,qBAAsB,MAAO,KAAMG,EAAAA,cAAoBX,EAAYK,GAAI,KAAM,OAAQ,KAAMM,EAAAA,cAAoBX,EAAYM,EAAG,KAAM,8IAC33B,CAKA,MAJA,SAAoBP,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC3B,MAAOa,QAASC,GAAaZ,OAAOC,OAAO,CAAC,GAAGO,EAAAA,EAAAA,MAAsBV,EAAMW,YAC3E,OAAOG,EAAYF,EAAAA,cAAoBE,EAAWd,EAAOY,EAAAA,cAAoBb,EAAmBC,IAAUD,EAAkBC,EAC9H,E,UCbe,SAASe,EAAiBf,GACvC,OAAOY,EAAAA,cAAoBI,EAAAA,EAAehB,EAAOY,EAAAA,cAAoBK,EAAqBjB,GAC5F,CAHAgB,EAAAA,C","sources":["webpack://gwiyeom-blog/./content/posts/server/database/mysql/2025-03-06-mysql-errorLockTableSizeExceeded.mdx","webpack://gwiyeom-blog/./node_modules/@lekoarts/gatsby-theme-minimal-blog-core/src/templates/post-query.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    pre: \"pre\",\n    code: \"code\",\n    h1: \"h1\",\n    p: \"p\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.pre, null, React.createElement(_components.code, null, \"Error 1206: The total number of locks exceeds the lock table size\\n\\n\")), \"\\n\", React.createElement(_components.h1, null, \"배경\"), \"\\n\", React.createElement(_components.p, null, \"로깅은 펍섭 구조를 사용해서 빠르게 다량의 로그 메시지를 DB에 넣고있다!!\\n데이터베이스에 로그 데이터를 반복적으로 삽입하는 작업이 이루어지고 있다\\n로그 기록을 삽입하면서 트랜잭션이 처리하는 데이터가 많아지고\\n그로 인해 락을 걸어야 하는 테이블의 개수와 레코드 수가 급증했습니다\\nMySQL은 동시에 처리할 수 있는 락의 수에 제한이 있는데\\n이 제한을 초과하면 1206 에러가 발생\"), \"\\n\", React.createElement(_components.h1, null, \"원인\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"Lock Table Size 초과\"), \"\\n\", React.createElement(_components.li, null, \"트랜잭션 내의 INSERT 반복\"), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, \"해결?\"), \"\\n\", React.createElement(_components.p, null, \"당장은 데이터베이스를 새로 추가하여\\n운영되고 있는 db를 차지하지 않도록 하기로 했고 (운영 DB의 부하를 분산)\\n이후에는 로깅 내용을 일단 파일,큐 등에 저장 후 일정 주기로 배치 하거나\\n다른 방법을 찾아서 로깅 방식을 변경해야 할 것 같다\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"/home/runner/work/gwiyeomgo.github.io/gwiyeomgo.github.io/content/posts/server/database/mysql/2025-03-06-mysql-errorLockTableSizeExceeded.mdx\";\nimport PostComponent, {Head} from \"../components/post\";\nPostComponent\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostComponent, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport {Head};\nconst query = \"2040642971\";\n"],"names":["_createMdxContent","props","_components","Object","assign","pre","code","h1","p","ol","li","_provideComponents","components","React","wrapper","MDXLayout","GatsbyMDXWrapper","PostComponent","GATSBY_COMPILED_MDX"],"sourceRoot":""}