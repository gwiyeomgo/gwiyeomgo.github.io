{"version":3,"file":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2025-03-26-mysql-with-mdx-7e5cb0ab46623f34db8a.js","mappings":"mNAGA,SAASA,EAAkBC,GACzB,MAAMC,EAAcC,OAAOC,OAAO,CAChCC,GAAI,KACJC,EAAG,IACHC,GAAI,KACJC,GAAI,KACJC,IAAK,MACLC,KAAM,OACNC,GAAI,KACJC,GAAI,OACHC,EAAAA,EAAAA,MAAsBZ,EAAMa,YAC/B,OAAOC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMA,EAAAA,cAAoBb,EAAYG,GAAI,KAAM,MAAO,KAAMU,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,qGAAsG,KAAMS,EAAAA,cAAoBb,EAAYK,GAAI,KAAM,UAAW,KAAMQ,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,iDAAkD,KAAMS,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,2DAA4D,KAAMS,EAAAA,cAAoBb,EAAYM,GAAI,KAAM,MAAO,KAAMO,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,oDAAqD,KAAMS,EAAAA,cAAoBb,EAAYO,IAAK,KAAMM,EAAAA,cAAoBb,EAAYQ,KAAM,KAAM,uLAAwL,KAAMK,EAAAA,cAAoBb,EAAYG,GAAI,KAAM,MAAO,KAAMU,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,8FAA+F,KAAMS,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,4EAA6E,KAAMS,EAAAA,cAAoBb,EAAYI,EAAG,KAAM,+EAAgF,KAAMS,EAAAA,cAAoBb,EAAYS,GAAI,KAAM,KAAMI,EAAAA,cAAoBb,EAAYU,GAAI,KAAM,8CAA+C,KAAMG,EAAAA,cAAoBb,EAAYU,GAAI,KAAM,uCAAwC,KAAMG,EAAAA,cAAoBb,EAAYU,GAAI,KAAM,iBAAkB,MACzpD,CAKA,MAJA,SAAoBX,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC3B,MAAOe,QAASC,GAAad,OAAOC,OAAO,CAAC,GAAGS,EAAAA,EAAAA,MAAsBZ,EAAMa,YAC3E,OAAOG,EAAYF,EAAAA,cAAoBE,EAAWhB,EAAOc,EAAAA,cAAoBf,EAAmBC,IAAUD,EAAkBC,EAC9H,E,UCfe,SAASiB,EAAiBjB,GACvC,OAAOc,EAAAA,cAAoBI,EAAAA,EAAelB,EAAOc,EAAAA,cAAoBK,EAAqBnB,GAC5F,CAHAkB,EAAAA,C","sources":["webpack://gwiyeom-blog/./content/posts/server/database/mysql/2025-03-26-mysql-with.mdx","webpack://gwiyeom-blog/./node_modules/@lekoarts/gatsby-theme-minimal-blog-core/src/templates/post-query.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    h2: \"h2\",\n    h3: \"h3\",\n    pre: \"pre\",\n    code: \"code\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"배경\"), \"\\n\", React.createElement(_components.p, null, \"이벤트 와 기부 정보는 서로 역일 수 있는 key 는 member_id 입니다\\n이벤트를 참여한 사람의 기부 정보도 보여주고 또한 참여한 이벤트도 보여달라는\\n요청이 왔습니다\"), \"\\n\", React.createElement(_components.h2, null, \"WITH 절\"), \"\\n\", React.createElement(_components.p, null, \"join이 어려운 구조이며\\n계층적/순차적인 계산하거나 중간 결과 재사용하는 경우\"), \"\\n\", React.createElement(_components.p, null, \"ex) 테이블 간 물리적 외래 키 연결은 없지만\\nuser_id 같은 공통 키로 묶을 수 있는 경우\"), \"\\n\", React.createElement(_components.h3, null, \"예시\"), \"\\n\", React.createElement(_components.p, null, \"각 회원별로 총 주문 금액을 알고 싶고,\\n총액이 1,000 이상인 회원만 보고 싶다.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, null, \"WITH user_order_totals AS (\\n  SELECT user_id, SUM(price) AS total_amount\\n  FROM orders\\n  GROUP BY user_id\\n)\\n\\nSELECT *\\nFROM user_order_totals\\nWHERE total_amount >= 1000;\\n\")), \"\\n\", React.createElement(_components.h1, null, \"문제\"), \"\\n\", React.createElement(_components.p, null, \"문제는 이벤트,이벤트참여정보,이벤트체택정보 3개 테이블을 left join 했더니\\nmember_id 가 복수가 나왔고 기부 정보 또한 늘어나는 문제가 있었습니다\"), \"\\n\", React.createElement(_components.p, null, \"기부도 복수, 이벤트 참여도 복수라면 결과가 곱집합처럼 늘어났다\\n단순히 join 과 with 으로 해결할 수 없고 더 복잡해졌다\"), \"\\n\", React.createElement(_components.p, null, \"결국 요청한 사용자가 기부를 많이한 기부자나,채택이 된 경우 등 보고 싶은 욕구로\\n요청이 들어왔기 때문에 나눠서 쿼리 결과를 전달했다\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"'2025-03-25' 특정 날짜에 이벤트 참여자 리스트 (채택 여부 확인)\"), \"\\n\", React.createElement(_components.li, null, \"'2025-03-25' 특정 날짜에 이벤트 참여자의 기부 리스트\"), \"\\n\", React.createElement(_components.li, null, \"특정 회원의 기부 리스트\"), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"/home/runner/work/gwiyeomgo.github.io/gwiyeomgo.github.io/content/posts/server/database/mysql/2025-03-26-mysql-with.mdx\";\nimport PostComponent, {Head} from \"../components/post\";\nPostComponent\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostComponent, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport {Head};\nconst query = \"2040642971\";\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","p","h2","h3","pre","code","ol","li","_provideComponents","components","React","wrapper","MDXLayout","GatsbyMDXWrapper","PostComponent","GATSBY_COMPILED_MDX"],"sourceRoot":""}