---
title: HTTP 상태 코드
date: 2022-03-10
slug: "/protocol/2022-03-10-protocol-http-statusCode"
tags:
  - PROTOCOL
  - 2022
---
# HTTP 상태 코드 정리

## 배경

HTTP 상태 코드는 웹 서버와 클라이언트 간의 통신 상태를 나타내는 표준 응답 코드
이 코드는 클라이언트가 요청한 작업의 결과를 나타내며, 특정 오류 상황을 명확히 전달합니다.

## 상태 코드별 정리

### 클라이언트 오류 (4xx)

| 번호  | 상태                   | 상황 요약                                                                     |
| --- | -------------------- | ------------------------------------------------------------------------- |
| 400 | Bad Request          | 잘못된 요청                                                                    |
|     |                      | 사용자가 잘못된 고유 번호로 결과 보고서 조회를 요청 + 유효성 검사를 통해 400 상태를 반환 |
| 401 | Unauthorized         | 인증 실패                                                                     |
|     |                      | 로그인에 실패한 경우 401 상태가 반 (해당 응답 시 자동 로그아웃이 트리거)                       |
| 403 | Forbidden            | 권한이 없음 + 리소스가 특정 상태(승인 전)라서 금지된 작업일 경우                                                                    |
|     |                      | 권한이 없는 사용자가 특정 메뉴에 접근하면 403 상태가 반환됩니다. 예: 방마다 허락이 필요한 경우.                 |
|     |                      |    * 카카오 알림톡 url 의 A회원의 기부번호가 경로에 있다 B회원이 알림톡 url 을 통해서 접근했다 B도 회원이라 로그인은 되었지만 다른사람의 기부를 조회 할 수 없는 상황이다 http 상태코드는?          |
|     |                      |    보안상 문제 없고 명확하게 알리고 싶다면 403 보안상 리소스 존재 여부도 알리지 않는다면 404          |
|     |                      |    * 승인이 되지 않은 기간의 기관 담당자도 담당자 목록에 보이고 있어 이 데이터중 1개 데이터를 수정하려고 하는데 아직기관 승인이 나지 않아서 담당자를 승인할 수 없는 상황이야 |
| 404 | Not Found            | 리소스 없음    (이 리소스가 있는지 없는지조차 알려주고 싶지 않다)                                                                |
|  |        | * REST API에서 보안이나 개인 정보 관련된 리소스                                                             |
|  |        | * "너는 이걸 볼 수 없어" → 그냥 없는 것처럼 응답하겠다 (404)                                                      |
|     |                      | 기부 영수증 정보가 없거나, 자신이 기부하지 않은 정보를 조회하려 할 때 404 상태를 반환합니다.                   |
| 409 | Conflict             |  현재 리소스 상태와 충돌                                                               |
|     |                      | 두 사용자가 동시에 동일한 데이터를 수정하려 할 때와 같은 충돌 상황에서 사용됩니다.                           |
|     |                      | * 이미 신청된 이벤트를 다시 신청할 때 -> 이미 참여한 이벤트 입니다                         |
| 410 | Gone                 | 리소스 삭제됨                                                                   |
|     |                      | 예전에 존재했던 페이지나 리소스가 삭제되었을 때 410 상태를 반환합니다.                                 |
| 422 | Unprocessable Entity | 처리 불가                                                                     |
|     |                      | 요청 형식은 맞지만 비즈니스 조건에 따라 처리가 불가능한 경우 사용됩니다.                                 |
|     |                      | * 법적대리인은 19세 이상만 가능합니다                     |
|     |                      | * 당일 발송은 4시 이후 등록이 불가능합니다              |
| 429 | Too Many Requests    | 과도한 요청                                                                    |
|     |                      | 짧은 시간 안에 너무 많은 요청을 보낸 경우 429 상태가 반환됩니다.                                   |

### 성공 (2xx)

| 번호 | 상태 | 상황 |
| --- | --- | --- |
| 200 | OK | 요청이 성공적으로 처리되었습니다. |
| 201 | Created | 요청이 성공적으로 처리되었으며, 새로운 리소스가 생성되었습니다. |
| 202 | Accepted | 요청이 접수되었으나 아직 처리되지 않았습니다. |
| 203 | Non-Authoritative Information | 요청은 성공했으나, 원본 서버가 아닌 다른 소스에서 정보를 가져왔습니다. |
| 204 | No Content | 요청이 성공했으나, 반환할 콘텐츠가 없습니다. |

### 에러 (5xx)

| 번호 | 상태 | 상황 |
| --- | --- | --- |
| 502 | Bad GateWay | |
|  |  |502 Bad Gateway는 Nginx, API Gateway, ALB, CloudFront 같은 중간 서버(프록시, 게이트웨이) 가
백엔드 서버로부터 유효한 응답을 받지 못했을 때 발생 (나는 백엔드로부터 유효한 응답 못 받았어!)|
| 503 | Service Unavailable | 서버가 일시적으로 요청을 처리할 수 없습니다. 예를 들어, DB가 잠긴 상태에서 API 요청이 있을 경우 503 상태를 반환합니다. |
| 504 | Gateway Timeout | 서버가 게이트웨이 또는 프록시로부터 적절한 응답을 받지 못해 요청 시간이 초과되었습니다. |



> 데이터가 없을 때는 404가 아니라, 200 또는 204가 적절할 수 있다?

404 오류가 발생했을 때 데이터가 없는 상황을 오류로 간주해야 할지 고민 했었다.
경우에 따라 200번대 메시지를 보내는 것이 더 적절할 수 있음
요청은 성공했으나 제공할 내용이 없을 경우 204(No Content) 상태를 반환

> 502
A(sqs 에서 컨슘해서 요청을 전달 서비스)->B -> C B 에서는 C 를 호출했지만 시간이 오래 걸렸고 A 와 C 사이에 요청이 오래 걸려 응답이 오기 전 중단되어 502 발생 문제는 C 에서 데이터 변경이 발생


A (SQS 컨슈머 서비스) → B (중간 API 서비스) → C (처리 서비스)

- A: 요청을 SQS에서 읽고 처리 시작
- B: API 계층, C에게 요청 전달
- C: 실제 데이터 변경 발생

SQS 에서 받은 요청 수신한 A가 B 로 전달하고
B에서 C 로 요청을 보내 응답을 기다리는데 응답 시간이 길어졌고
A 와 B 사이 중간 프록시 or api gateway 에서 502 를 발생

문제는 C 는 정상적으로 데이터를 변경을 진행해서 더이상 수정이 불가능한 상태인데
A 에서 실패로 인식하고 재시도 진행해 에러가 발생했습니다  (중복 호출)

문제
A는 요청이 실패한 줄 알고 재시도 3번 시도 했고
데이터가 변경되어서 더이상 변경 가능한 상태가 아님 (중복 처리)

## 출처

- [HTTP 상태 코드 가이드](https://kanzler.tistory.com/44)
- [MDN HTTP 상태 코드](https://developer.mozilla.org/ko/docs/Web/HTTP/Status)
- [504](https://dkswnkk.tistory.com/722)






 