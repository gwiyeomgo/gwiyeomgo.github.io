"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[6419],{2888:function(e,n,t){t.r(n),t.d(n,{Head:function(){return r.F},default:function(){return d}});var l=t(7294),E=t(1151);function c(e){const n=Object.assign({h1:"h1",p:"p",pre:"pre",code:"code",h2:"h2",ul:"ul",li:"li"},(0,E.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.h1,null,"배경"),"\n",l.createElement(n.p,null,"2024년 12월부터 2025년 2월까지 월별 OO 신청건 조회 업무를할때\ncase 월별 신청건 조회함 이때 순서를 강제하기 위해 mysql field 사용"),"\n",l.createElement(n.h1,null,"쿼리"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"SELECT\n    CASE\n        WHEN JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2024-12%' THEN '2024 12월'\n        WHEN JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2025-01%' THEN '2025 1월'\n        WHEN JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2025-02%' THEN '2025 2월'\n    END AS month,\n    COUNT(*) AS count\nFROM test_table d\nWHERE\n  JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2024-12%'\n    OR JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2025-01%'\n    OR JSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2025-02%'\nGROUP BY month\nORDER BY FIELD(month, '2024 12월', '2025 1월', '2025 2월');\n\n")),"\n",l.createElement(n.h2,null,"ORDER BY FIELD 사용 이유?"),"\n",l.createElement(n.p,null,"일반적인 ORDER BY month ASC의 동작 방식\n월별 정렬을 원하는 순서대로 강제하기 위해"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"(참고) 날짜가 JSON 필드(created)에 저장되어 있어 JSON_EXTRACT를 사용하여 특정 연월 데이터를 조회해야 했음"),"\n"),"\n",l.createElement(n.h1,null,"검증방법"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"SELECT *\nFROM donations d\nINNER JOIN donation_collects c ON d.id = c.donation_id\nWHERE\nJSON_UNQUOTE(JSON_EXTRACT(d.created, '$.datetime')) LIKE '2024-12%';\n")),"\n",l.createElement(n.p,null,"2024년 12월 데이터가 20건 이하로 눈으로 확인 가능"),"\n",l.createElement(n.p,null,"만약 숫자가 컸다면 어떻게 검증해야 했을까?"))}var a=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,E.ah)(),e.components);return n?l.createElement(n,e,l.createElement(c,e)):c(e)},r=t(8804);function d(e){return l.createElement(r.Z,e,l.createElement(a,e))}r.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2025-03-13-mysql-field-mdx-fa84841e7a74f2abd610.js.map